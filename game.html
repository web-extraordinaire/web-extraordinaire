<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.js"></script> 
    <script src="functions.js"></script>
<script>

var is_ded = false;
var moveY = 390;
const queryString = window.location.search;
console.log(queryString);
const urlParams = new URLSearchParams(queryString);
var lives = urlParams.get('lives')
console.log(lives);
function ded() {
  x = 0;
  lives = lives - 1
  boss_health = 20
 if(lives === 0) {
    is_ded = true;
                      background(220);
            textSize(100)
text("you ded", 0,100)
           if(mouseIsPressed) {
             level = 1;
             is_ded = false;
             x = 10;
             y = 390;
           }
  } 
}

var boss_health = 20;

var enemy1_moves = false
var enemy_7moves = false
var enemy5_health = 4
var enemy_5x = 450
var enemy_5y = 350

var enemy6_health = 2
var enemy_6x = 480
var enemy_6y = 350

var enemy7_health = 4
var enemy_7x = 450
var enemy_7y = 390

var enemy8_health = 2
var enemy_8x = 480
var enemy_8y = 390

var enemy1_health = 2
var enemy_x1 = 450
var enemy_y1 = 390

var enemy3_health = 4
var enemy_3x = 450
var enemy_3y = 390

var enemy4_health = 4
var enemy_4x = 450
var enemy_4y = 350

var enemy_2x = 450
var enemy_2y = 350
var enemy2_health = 2
var health = 3;
  var moveXtop = 200
  var moveX = 200
var y = 390;
var x = 10;
var level = 0;
var moveX = 30;
var moveY = 390;
var shoot_enemy = false
if( shoot_enemy === true) {
  line(x+10,y+5,x+30,y+5)
}

function setup() {

  createCanvas(400, 400);
}

function draw() {
var  s = second()

 
function heart(x) {
  
    fill(255, 0, 0);
arc(x,20,20,20,600,0);
arc(x+21,20,20,20,600,0);
line(x+10,45,x-10,18);
line(x+10,45,x+30,18);
}

  
  if(is_ded === true) {
    ded();
 return;
  }
      if ( mouseIsPressed  ) {
       x=x+3;
    }
    if (mouseX < x) {
      x=x-2;
    }
  if (keyCode === UP_ARROW) {
  y = 350;
  }
    if (keyCode === DOWN_ARROW) {
      y = 390;
      
    }
  
  background(220);
text(lives,100,100)
  
  textSize(15)
if(level === 12 && x > 300) {
  x = x -50
  health = health - 1
  
}
    if(enemy_5x < x + 10 && enemy_5x > x && y === enemy_5y&& level === 11 ) {
    x = x - 50
    health = health - 1;
  }  
  if(enemy_6x < x + 10 && enemy_6x > x && y === enemy_6y&& level === 11) {
    x = x - 50
    health = health - 1;
  } 
  if(enemy_7x < x + 10 && enemy_7x > x && y === enemy_7y&& level === 11 ||enemy_7x < x + 10 && enemy_7x > x && y === enemy_7y&& level === 12) {
    x = x - 50
    health = health - 1;
  } 
  if(enemy_8x < x + 10 && enemy_8x > x && y === enemy_8y&& level === 11) {
    x = x - 50
    health = health - 1;
  }
     
  if(enemy5_health === 0){
    enemy_5y = -30;
  }
if(x+ 30 === 300 && level === 12) {
  boss_health = boss_health - 1
}

  if(enemy_5x === x + 30 && level === 11 && y === 350) {
    enemy5_health = enemy5_health - 1;
    
  }
    if(enemy6_health === 0){
    enemy_6y = -30;
  }

  if(enemy_6x === x + 30 && level === 11 && y === 350) {
    enemy6_health = enemy6_health - 1;
    
  }
      if(enemy7_health === 0){
    enemy_7y = -30;
  }

  if(enemy_7x === x + 30 && level === 11 && y === 390||enemy_7x === x + 30 && level === 12 && y === 390) {
    enemy7_health = enemy7_health - 1;
    
  }
      if(enemy8_health === 0){
    enemy_8y = -30;
  }

  if(enemy_8x === x + 30 && level === 11 && y === 390) {
    enemy8_health = enemy8_health - 1;
    
  }
    if(enemy4_health === 0){
    enemy_4y = -30;
  }

  if(enemy_4x === x + 30 && level === 10 && y === 350) {
    enemy4_health = enemy4_health - 1;
    
  }
      if(enemy3_health === 0){
    enemy_3y = -30;
  }

  if(enemy_3x === x + 30 && level === 10 && y === 390) {
    enemy3_health = enemy3_health - 1;
    
  }
  if(enemy_3x < x + 10 && enemy_3x > x && y === enemy_3y && level === 10) {
    x = x - 50
    health = health - 1;
  }
    if(enemy_4x < x + 10 && enemy_4x > x && y === enemy_4y&& level === 10) {
    health = health - 1;
    x = x - 50
  }


    if(enemy_x1 > x && enemy_x1 < x + 10   && enemy_y1 === y && level === 9 ||enemy_x1 > x && enemy_x1 < x + 10   && enemy_y1 === y && level === 12  )
    {    
  
      x=x-50 
      health = health - 1
      
    }
if(enemy_2x>x && enemy_2x < x + 10 && y === enemy_2y && level === 9 ) 
{
        x=x-50 
      health = health - 1
}
  
  if(enemy_x1 === x + 30 && enemy_y1 === y && level === 9 || enemy_x1 === x + 30 && enemy_y1 === y && level === 12) {
    enemy1_health = enemy1_health - 1
  }
 
  if(enemy_2x === x + 30 && y === enemy_2y && level === 9) {
    enemy2_health = enemy2_health - 1
  }
  if(enemy2_health === 0 && level === 9) {
    enemy_2x = 1397327487284
  }

  if(enemy1_health === 0 && level === 9 || enemy1_health === 0 && level === 12) {
    enemy_x1 =346578346
  }
  // 
  
  //
    if(health===2) {
    line(0,0,40,40)

  }
  if(health === 1) {
        line(0,0,40,40)

    line(40,0,80,40)
  }
  if(health === 0) {
    ded()
        health = 3

  }
if( shoot_enemy === true) {
  line(x+10,y+5,x+30,y+5)
}
  if(level === 0) {
      textSize(100)
   text("play",100,200) 

  rect(x,390,10,10);
    if (mouseX < 300 & mouseX > 100 & mouseY <200 & mouseY > 100 & mouseIsPressed ) {
      level = level + 1;
    }
  }
    if(level === 1) {
          // contrals
      textSize(20);
text("hold down the mouse to move forward",0,150);
      textSize(17)
text("move your mouse behind the guy to move backward",0,200);
            
    rect(x,390,10,10);
      if (x>400) {
      x = 10;
        level = level + 1
      }
  }  
  
  if(level === 2) {

            rect(x,y,10,10)
   line (0,340,400,340);
     line(200,400,210,380)
         line(220,400,210,380)
if(x<220 & x > 200 & y > 380) {
  ded();
  return;
}
  if( x > 400) {
    level = level + 1;
    x = 10
  }


  }
    
  if(level === 3) {
    line (0,340,400,340);
            
            rect(x,y,10,10);
        line(80,340,110,360)
        line(130,340,110,360)
            
        line(200,400,210,380)
        line(220,400,210,380)
    if (x < 130 & x > 80 & y<360 || x>200 & x<210 & y > 380) {
      ded();
      return;
    }
    if(x > 400) {
      level = level + 1;
      x = 10;
    }
  }  

  if(level === 4) {
    moveX=moveX + 2;
            moveXtop=moveXtop + 2;
     rect(x,y,10,10)
            line (0,340,400,340);
    line(moveX,400,moveX+10,380)
           line(moveX + 20,400,moveX+10,380)
            
            line(moveXtop + 100,350,moveXtop+110,360)
           line(moveXtop + 120,350,moveXtop+110,360)
                if(moveX > 392) {
              moveX= 100;
            }
              if(moveXtop > 272) {
              moveXtop= 100;
            }
    if(moveX > 390 & x> 100 & y > 380 || moveXtop > 270 & x > 100 & y < 360 ) {
ded();
    return;
    }
    if (x > moveX & x < (moveX + 20) & y > 380 || x > (moveXtop + 100) & x < (moveXtop + 120) & y < 360 ) {
      ded();
    return;
    
    }
  if(x > 400) {
    level = level + 1
    x = 10
  }
  }  
  
  if(level === 5) {
    moveY = moveY + 2
       if (moveY > 400) {
                  moveY = 330
                }
   if (x>200 & x < 220 & y > (moveY - 10) & y < (moveY + 10) ) {
ded();
return;
   }
    line (0,340,400,340);
                rect(x,y,10,10)
                line(200,moveY,220,moveY+10)
                line(200,moveY,220,moveY-10)
    if(x > 400) {
      x = 10;
      level = level + 1
    }
  }  
  if(level === 6) {
    moveX = moveX + 2
    moveXtop = moveXtop + 3;
                         if(moveX > 380 ) {
      moveX = 100;
    }
                    if(moveXtop > 380 ) {
                      moveXtop = 100;
                    }
    if(y<360 & x <moveXtop + 20 & x > moveXtop || y > 380 & x > moveX - 10 & x < moveX + 20) {
ded();
      return;
    }
           if (moveX > 370 & x > 100 & y > 380 || moveXtop > 370 & x > 100 & y < 360) {
ded();
             return;
           }
          line(moveX,400,moveX+10,380)
      line(moveX + 20,400,moveX+10,380)
                    line(moveXtop,340,moveXtop+10,350)
      line(moveXtop + 20,340,moveXtop+10,350)
      
      line (0,340,400,340);        
      rect(x,y,10,10)
    if(x > 400) {
      x = 10;
      level = level + 1;
    }
  }  
  if(level === 7) {
    if(y<360 & x <moveXtop + 20 & x > moveXtop || y > 380 & x > moveX - 10 & x < moveX + 20) {
ded();
      return;
    }
                            moveXtop = moveXtop + 3;
                    moveX=moveX+2;
    moveY = moveY + 2
      if(moveX > 380 ) {
      moveX = 100;
    }
                        if(moveY > 400 ) {
      moveY = 330;
    }
                    if(moveXtop > 380 ) {
                      moveXtop = 100;
                    }
if (x>200 & x < 220 & y > (moveY - 10) & y < (moveY + 10) ) {
ded();
  return;
    }
           if (moveX > 370 & x > 100 & y > 380 || moveXtop > 370 & x > 100 & y < 360) {
ded();
             return;
           }
                            line(200,moveY,220,moveY+10)
                line(200,moveY,220,moveY-10)
            rect(x,y,10,10)
            line (0,340,400,340);
                              line(moveX,400,moveX+10,380)
      line(moveX + 20,400,moveX+10,380)
                    line(moveXtop,340,moveXtop+10,350)
      line(moveXtop + 20,340,moveXtop+10,350)
    if (x> 400) {
      x = 10
      level = level + 1
    }
  }
  
  if(level === 8) {
    heart(10);
heart(50);
heart(90);
    rect(x,y,10,10)
    shoot_enemy =true;
    textSize(32)
    text("you got the sword of power",0,100)
    if(x > 400) {
      level = level + 1;
      x = 10;
    }
  }
  
  if(level === 9) {
    
    enemy_x1 = enemy_x1 - 1
    enemy_2x = enemy_2x - 1    
       rect(enemy_x1,enemy_y1,10,10)
    rect(enemy_2x,enemy_2y,10,10)

    rect(x,y,10,10)
    heart(10);
heart(50);
heart(90);
    if(x > 400) {
      level = level + 1
      x = 10;
    }
  }
if(level === 10) {
  rect(x,y,10,10)
  enemy_3x = enemy_3x - 1
  enemy_4x = enemy_3x - 1
  text("these enemys have 4 health",100,150)
  rect(enemy_3x,enemy_3y,10,10,100)
  rect(enemy_4x,enemy_4y,10,10,100)

  
  heart(10);
  heart(50);
heart(90);
  if(x > 400) {
    x = 10;
    level = level + 1;
  }
}
  if(level === 11) {
rect(enemy_5x,enemy_5y,10,10,100)
rect(enemy_6x,enemy_6y,10,10)
rect(enemy_7x,enemy_7y,10,10,100)
rect(enemy_8x,enemy_8y,10,10)
  enemy_5x=enemy_5x-1;
    enemy_6x=enemy_6x-1;
    enemy_7x=enemy_7x-1
    enemy_8x=enemy_8x-1
    heart(10)
    heart(50)
    heart(90)
    rect(x,y,10,10)
    if(x > 400) {
      x = 10 
      level = level + 1;
      health = 3
    }
  }
if(level === 12) {
  heart(10)
  heart(50)
  heart(90)
  rect(x,390,10,10)
  rect(enemy_7x,enemy_7y,10,10,100)
  rect(enemy_x1,enemy_y1,10,10)
  text("the boss has disabled your ability to jump!",60,100)
  
  if(s === 2 || s === 12 || s === 22 || s === 32 || s === 42 || s === 52) {
    enemy_x1 = 400 
    enemy1_health = 2
 enemy1_moves = true
  }
    if(s === 7 || s === 17 || s === 27 || s === 37 || s === 47 || s === 57) {
enemy_7moves = true
      enemy_7y = 390
      enemy_7x = 400;
      enemy7_health = 4
  }
  if(enemy_7moves === true) {
    enemy_7x = enemy_7x - 1
  }
  if(enemy1_moves === true) {
    enemy_x1 = enemy_x1 - 1
  }
  if (boss_health === 0 || boss_health < 0) {
      background(220)
      text("you win",100,100)
    
  }
  text(boss_health,200,200)
ellipse(350,350,100,100) ;
line(330,340,340,350);
line(356,340,340,350);
ellipse(330,350,10,10);
ellipse(349,350,10,10);
}  
}


</script>
  </head>
</html>
